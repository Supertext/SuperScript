<!DOCTYPE html>
<html>

    <head>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/bootstrap-overrides.css" rel="stylesheet">
        <link href="../css/shCore.css" rel="stylesheet">
        <link href="../css/shCoreDefault.css" rel="stylesheet">
        <link href="../css/shThemeDefault.css" rel="stylesheet">
        <link rel="icon" href="../img/favicon.ico">
        <title>SuperScript Documentation - The Emitter</title>
    </head>

<body>

    <header class="navbar navbar-static-top bs-docs-nav">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="../index.html">
                    <img alt="Brand" src="../img/superscript-logo.gif">
                </a>
            </div>
            <nav class="collapse navbar-collapse bs-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="../current-projects.html">Current Projects</a></li>
                    <li><a href="../core-concepts.html">Core Concepts</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Declarations<span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#">No pages yet!</a></li>
                        </ul>
                    </li>
                    <li class="active dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Emitters<span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="emitters.html">The Emitter</a></li>
                            <li class="active"><a href="create-emitter.html">Creating Emitters</a></li>
                            <li><a href="emitting.html">Emitting Declarations</a></li>
                        </ul>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://github.com/Supertext/SuperScript">View on GitHub</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div id="content">

        <div class="jumbotron">
            <div class="container">
                <h1>SuperScript</h1>
            </div>
        </div>

        <div class="container">

            <div class="row">

                <div class="col-xs-12">

                    <p>
                        <mark><strong><em>This documentation is still being written. Please bear with us while we complete this documentation.</em></strong></mark>
                    </p>

                    <h2>The Emitter</h2>

                    <h3 id="create-emitter">Creating an Emitter</h3>

                    <p>
                        One of the first thing you'll want to do with SuperScript is create the emitter or emitters. There are two ways of achieving this:
                    </p>
                    
                    <ol>
                        <li><a href="#configure-emitter">specifying an emitter in the configuration file</a></li>
                        <li><a href="#emitter-programmatically">specifying an emitter programmatically</a></li>
                    </ol>


                    <h4 id="configure-emitter">Specifying an emitter in the configuration file</h4>

                    <p>
                        SuperScript allows many of its features to be declared in the configuration file.
                    </p>

                    <pre class="brush: xml">
                        &lt;configSections&gt;
                            &lt;section name="superScript" type="SuperScript.Configuration.SuperScriptConfig, SuperScript.Common, Version=0.0.0.1, Culture=neutral" /&gt;
                        &lt;/configSections&gt;
                        &#10;
                        &hellip;
                        &#10;
                        &lt;superScript&gt;
                            &lt;emitters&gt;
                                &lt;emitter key="javascript" isDefault="true"&gt;
                                    &lt;converters&gt;
                                        &lt;modifier type="SuperScript.JavaScript.Modifiers.Converters.JavaScriptStringify, SuperScript.JavaScript" /&gt;
				                    &lt;/converters&gt;
                                    &lt;postModifiers&gt;
                                        &lt;modifier emitMode="LiveOnly" type="SuperScript.JavaScript.Modifiers.Post.JavaScriptMinifier, SuperScript.JavaScript" /&gt;
				                    &lt;/postModifiers&gt;
                                    &lt;writers&gt;
                                        &lt;modifier type="SuperScript.ExternalFile.Modifiers.Writers.ExternalScriptWriter, SuperScript.ExternalFile" /&gt;
				                    &lt;/writers&gt;
			                    &lt;/emitter&gt;                        
                            &lt;/emitters&gt;
                        &lt;/superScript&gt;
                    </pre>

                    <p class="small">
                        The above example requires the <a href="https://github.com/Supertext/SuperScript.Common" target="_blank">SuperScript.Common</a> as well as additional libraries.
                    </p>
                    
                    <p>
                        Here is a description of the above example:
                    </p>
                    
                    <ol>
                        <li>
                            The configuration's <code>&lt;configSections&gt;</code> element is modified to allow a custom section (<code>&lt;superScript&gt;</code>), hitherto unrecognised by ASP.NET,
                            to be declared.
                        </li>
                        <li>
                            <p>
                                An emitter is instantiated and added to the <attr title="SuperScript.Declarations.Emitters"><code>Emitters</code></attr> collection.
                            </p>
                            <p>
                                This instance of <attr title="SuperScript.Emitters.IEmitter"><code>IEmitter</code></attr> is actually an object of type 
                                <attr title="SuperScript.Emitters.StandardEmitter"><code>StandardEmitter</code></attr>, which is the default type (if not specified).
                            </p>
                            <p>
                                Of course, it is possible to derive custom implementations of <attr title="SuperScript.Emitters.IEmitter"><code>IEmitter</code></attr>
                                with more features, and then specify the type in the <code>type</code> attribute on the <code>&lt;emitter&gt;</code> element.
                            </p>
                        </li>
                        <li>
                            <p>
                                The value "javascript" is assigned as the <attr title="SuperScript.Emitters.IEmitter.Key"><code>Key</code></attr> for this emitter
                            </p>
                        </li>
                        <li>
                            <p>
                                An instance of <attr title="SuperScript.JavaScript.Modifiers.Converters.JavaScriptStringify"><code>JavaScriptStringify</code></attr> is then assigned to the
                                <attr title="SuperScript.Emitters.IEmitter.CollectionConverter"><code>CollectionConverter</code></attr> property.
                            </p>
                            <p>
                                This specific implementation of <attr title="SuperScript.Modifiers.Converters.CollectionConverter"><code>CollectionConverter</code></attr>
                                has not been covered yet, but it should suffice to say that this is simply an implementation which runs on
                                the JavaScript-oriented declarables found in the <a href="https://github.com/Supertext/SuperScript.JavaScript" target="_blank">SuperScript.JavaScript</a> project.
                            </p>
                        </li>
                        <li>
                            <p>
                                An instance of <attr title="SuperScript.JavaScript.Modifiers.Post.JavaScriptMinifier"><code>JavaScriptMinifier</code></attr> is
                                then assigned to the <attr title="SuperScript.Emitters.IEmitter.PostModifiers"><code>PostModifiers</code></attr> property.
                            </p>
                            <p>
                                This specific type of <attr title="SuperScript.Modifiers.Post.CollectionPostModifier"><code>CollectionPostModifier</code></attr>
                                has not been covered yet, but it should suffice to say that this is simply an implementation which uses Microsoft's
                                <a href="https://webgrease.codeplex.com/" target="_blank">WebGrease</a> library to minify javascript.
                            </p>
                            <p>
                                Note that this <code>modifier</code> element has its <code>emitMode</code> attribute set to
                                <attr title="SuperScript.EmitMode.LiveOnly"><code>LiveOnly</code></attr>. This will be covered when discussing modifiers.
                            </p>
                        </li>
                        <li>
                            <p>
                                An instance of <attr title="SuperScript.ExternalFile.Modifiers.Writers.ExternalScriptWriter"><code>ExternalScriptWriter</code></attr>
                                is assigned to the <attr title="SuperScript.Emitters.IEmitter.HtmlWriter"><code>HtmlWriter</code></attr> property.
                            </p>
                            <p>
                                Again, this implementation of <code>HtmlWriter</code> is documented elsewhere, but this class writes the client-side form of
                                the emitter's declarations to an external file and places a <code>&lt;script src="&hellip;"&gt;</code> tag on the page.
                            </p>
                        </li>
                    </ol>
                    
                    <p>
                        This emitter may now be referenced in declarations' <code>EmitterKey</code> property. However, because this emitter was also declared with
                        as the default emitter, any declarations which are added to <attr title="SuperScript.Declarations.Collection"><code>SuperScript.Declarations.Collection</code></attr>
                        <em>without</em> an emitter key being stated will automatically be emitted using this (default) emitter.
                    </p>


                    <h4 id="emitter-programmatically">Specifying an emitter programmatically</h4>

                    <p>
                        An alternative to using the configuration file is to call some code which instantiates an emitter and adds it to the
                        <attr title="SuperScript.Declarations.Emitters"><code>Emitters</code></attr> collection.
                    </p>

                    <pre class="brush: c#">
                        SuperScript.Configuration.Settings.Instance.Emitters.Add(new StandardEmitter
		                                                                             {
			                                                                            Converter = new JavaScriptStringify(),
			                                                                            Key = "whenReady",
			                                                                            PostModifiers = new Collection&lt;CollectionPostModifier&gt;
				                                                                                            {
					                                                                                            new WhenReady
						                                                                                            {
							                                                                                            UseWhenBundled = true
						                                                                                            },
					                                                                                            new JavaScriptMinifier
						                                                                                            {
							                                                                                            EmitMode = EmitMode.LiveOnly,
							                                                                                            UseWhenBundled = false
						                                                                                            }
				                                                                                            },
			                                                                            HtmlWriter = new ScriptTagWriter()
		                                                                             });
                    </pre>

                    <p>
                        When specifying emitters programatically, this code should be placed in a method which is called once per application. For example, 
                        the <em>global.asax</em>'s <code>Application_Start</code> method presents a good opportunity.
                    </p>



                    <h2>What Next?</h2>

                    <p>
                        Read about emitting the declarations from an emitter <a href="emitting.html">here</a>.
                    </p>


                </div>

            </div>

        </div>

    </div>

    <footer>
        <div class="container">
            <p class="text-muted">
                SuperScript is made available under the <a href="https://github.com/Supertext/SuperScript/blob/gh-pages/LICENSE" target="_blank">MIT license</a>
            </p>
            <p>
                <a href="https://github.com/Supertext/SuperScript">View on GitHub</a>
            </p>
            <p>
                <a href="../index.html"><img alt="Brand" src="../img/superscript-logo.gif"></a>
            </p>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-1.11.2.min.js" type="text/javascript"></script>
    <script src="../scripts/bootstrap.min.js" type="text/javascript"></script>
    <script src="../scripts/shCore.js" type="text/javascript"></script>
    <script src="../scripts/shBrushCSharp.js" type="text/javascript"></script>
    <script src="../scripts/shBrushXml.js" type="text/javascript"></script>
    <script src="../scripts/shBrushJScript.js" type="text/javascript"></script>
    <script src="../scripts/shBrushRazor.js" type="text/javascript"></script>
    <script type="text/javascript">
        SyntaxHighlighter.defaults["gutter"] = false;
        SyntaxHighlighter.defaults["toolbar"] = false;
        SyntaxHighlighter.all();
    </script>

</body>



</html>